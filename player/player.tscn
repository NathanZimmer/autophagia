[gd_scene load_steps=18 format=3 uid="uid://dnhp4dcugklq6"]

[ext_resource type="Script" uid="uid://c1o8i6ob4hruq" path="res://player/player.gd" id="1_y2fp8"]
[ext_resource type="Environment" uid="uid://cbgre4uktxw6d" path="res://common/main_world_env.tres" id="2_xgxvm"]
[ext_resource type="Script" uid="uid://ck2srl31dxoy2" path="res://player/player_raycast_3d.gd" id="4_8t03j"]
[ext_resource type="PackedScene" uid="uid://cjew08elm562t" path="res://gui/gui.tscn" id="5_boad6"]
[ext_resource type="AudioStream" uid="uid://ecilmm8ymuvm" path="res://assets/player/sound/footstep_0.wav" id="7_hg6s5"]
[ext_resource type="Material" uid="uid://byvayr8jwcepu" path="res://player/materials/retro_filter.tres" id="8_hg6s5"]
[ext_resource type="Script" uid="uid://bnbt62ete8km4" path="res://player/inventory.gd" id="8_rgyib"]
[ext_resource type="Animation" uid="uid://3iekuyht51r3" path="res://assets/player/animations/camera_sway.res" id="9_ebec5"]
[ext_resource type="Script" uid="uid://dm0k8n1gf154f" path="res://player/camera_animation_player.gd" id="9_hg6s5"]
[ext_resource type="Script" uid="uid://clawryrmh60wq" path="res://player/message_handler.gd" id="10_8t03j"]
[ext_resource type="Animation" uid="uid://ds2ipytexoe1q" path="res://assets/player/animations/camera_impact.res" id="10_yllr7"]
[ext_resource type="Animation" uid="uid://djrqyxbnoaicn" path="res://assets/player/animations/camera_reset.res" id="11_kb6p2"]

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_4juu5"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8l6i1"]
radius = 0.3

[sub_resource type="CapsuleMesh" id="CapsuleMesh_dgi16"]
radius = 0.3

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2ieo8"]

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wodsf"]
_data = {
&"RESET": ExtResource("11_kb6p2"),
&"impact": ExtResource("10_yllr7"),
&"sway": ExtResource("9_ebec5")
}

[node name="Player" type="CharacterBody3D" groups=["player"]]
script = ExtResource("1_y2fp8")

[node name="Camera3D" type="Camera3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
cull_mask = 1047539
environment = ExtResource("2_xgxvm")
attributes = SubResource("CameraAttributesPractical_4juu5")
current = true
fov = 90.0
far = 400.0

[node name="PlayerRayCast3D" type="RayCast3D" parent="Camera3D"]
target_position = Vector3(0, 0, -2)
collide_with_areas = true
script = ExtResource("4_8t03j")
metadata/_custom_type_script = "uid://ck2srl31dxoy2"

[node name="MessageHandler" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("10_8t03j")
metadata/_custom_type_script = "uid://clawryrmh60wq"

[node name="Inventory" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("8_rgyib")
metadata/_custom_type_script = "uid://bnbt62ete8km4"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Gui" parent="CanvasLayer" node_paths=PackedStringArray("_crosshair_raycast") instance=ExtResource("5_boad6")]
_crosshair_raycast = NodePath("../../Camera3D/PlayerRayCast3D")

[node name="RetroFilter" type="ColorRect" parent="CanvasLayer"]
process_mode = 3
material = ExtResource("8_hg6s5")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
unique_name_in_owner = true
shape = SubResource("CapsuleShape3D_8l6i1")

[node name="Body" type="MeshInstance3D" parent="."]
layers = 512
cast_shadow = 0
gi_mode = 0
mesh = SubResource("CapsuleMesh_dgi16")
skeleton = NodePath("")

[node name="Footsteps" type="AudioStreamPlayer3D" parent="."]
unique_name_in_owner = true
process_mode = 3
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
stream = ExtResource("7_hg6s5")
volume_db = -30.0

[node name="CameraAnimationPlayer" type="AnimationPlayer" parent="."]
unique_name_in_owner = true
libraries = {
&"": SubResource("AnimationLibrary_2ieo8"),
&"player_camera": SubResource("AnimationLibrary_wodsf")
}
script = ExtResource("9_hg6s5")
